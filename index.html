<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Clinic Scraper</title>
    <!-- Corrected the link to Tailwind CSS -->
    <script src="[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)"></script>
    <!-- Corrected the link to Google Fonts -->
    <link href="[https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap](https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap)" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4 md:p-8">
        <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Dental Clinic Scraper</h1>
            <p class="text-gray-600 mb-6">Enter a list of dental clinic URLs (one per line) to determine if they are single clinics or part of a group.</p>

            <div class="mb-6">
                <label for="url-list" class="block text-sm font-medium text-gray-700 mb-2">Enter URLs:</label>
                <textarea id="url-list" rows="10" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="e.g.&#10;[https://www.mydentist.co.uk/&#10;https://www.exampledental.co.uk/](https://www.mydentist.co.uk/&#10;https://www.exampledental.co.uk/)"></textarea>
            </div>

            <button id="scrape-button" class="w-full bg-indigo-600 text-white font-semibold py-3 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-300 ease-in-out transform hover:-translate-y-1">
                Analyze Websites
            </button>

            <div id="loading" class="mt-6 text-center hidden">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
                <p class="mt-2 text-gray-600">Analyzing in progress... this may take a moment.</p>
            </div>

            <div id="results" class="mt-8"></div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 mt-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Known UK Dental Groups</h2>
            <p class="text-gray-600 mb-6">Here is a list of some of the largest dental groups in the UK. You can use their websites as a starting point for your research.</p>
            <ul id="dental-groups-list" class="space-y-3">
                <!-- Dental groups will be dynamically added here -->
            </ul>
        </div>
    </div>

    <script>
        // --- DATA ---
        const dentalGroups = [
            { name: "mydentist", url: "[https://www.mydentist.co.uk/](https://www.mydentist.co.uk/)" },
            { name: "Portman Dental Care", url: "[https://www.portmandentalcare.com/](https://www.portmandentalcare.com/)" },
            { name: "Rodericks Dental Partners", url: "[https://rodericksdentalpartners.co.uk/](https://rodericksdentalpartners.co.uk/)" },
            { name: "Colosseum Dental", url: "[https://www.colosseumdental.co.uk/](https://www.colosseumdental.co.uk/)" },
            { name: "European Dental Group", url: "[https://www.europeandentalgroup.com/](https://www.europeandentalgroup.com/)" },
            { name: "Bupa Dental Care", url: "[https://www.bupa.co.uk/dental](https://www.bupa.co.uk/dental)" },
            { name: "Dental Beauty Partners", url: "[https://dentalbeautypartners.co.uk/](https://dentalbeautypartners.co.uk/)" },
            { name: "Sync Dental", url: "[https://syncdental.co.uk/](https://syncdental.co.uk/)" },
            { name: "Carholme Dental Group", url: "[https://carholmedentalgroup.co.uk/](https://carholmedentalgroup.co.uk/)" }
        ];
        
        // Keywords to look for in a website's text to identify it as part of a group
        const groupKeywords = [
            'find a practice', 'our locations', 'our practices', 'dental group', 
            'number of practices', 'join our group', 'more than one practice', 'nationwide',
            'across the uk'
        ];

        // --- DOM ELEMENTS ---
        const scrapeButton = document.getElementById('scrape-button');
        const urlList = document.getElementById('url-list');
        const resultsDiv = document.getElementById('results');
        const loadingDiv = document.getElementById('loading');
        const dentalGroupsList = document.getElementById('dental-groups-list');

        // --- FUNCTIONS ---

        /**
         * Populates the list of known dental groups on the page.
         */
        function populateDentalGroups() {
            dentalGroups.forEach(group => {
                const li = document.createElement('li');
                li.classList.add('flex', 'items-center', 'p-3', 'bg-gray-50', 'rounded-md', 'hover:bg-gray-100', 'transition');
                li.innerHTML = `
                    <svg class="h-6 w-6 text-indigo-500 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                    </svg>
                    <a href="${group.url}" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline font-medium break-all">${group.name}</a>
                `;
                dentalGroupsList.appendChild(li);
            });
        }

        /**
         * Main function to handle the scraping process when the button is clicked.
         */
        async function handleScrape() {
            const urls = urlList.value.split('\n').map(url => url.trim()).filter(url => url !== '');
            if (urls.length === 0) {
                resultsDiv.innerHTML = '<p class="text-red-500 text-center">Please enter at least one URL.</p>';
                return;
            }

            resultsDiv.innerHTML = '';
            loadingDiv.classList.remove('hidden');
            scrapeButton.disabled = true;
            scrapeButton.classList.add('opacity-50', 'cursor-not-allowed');

            // Process each URL one by one.
            for (const url of urls) {
                await analyzeUrl(url);
            }

            loadingDiv.classList.add('hidden');
            scrapeButton.disabled = false;
            scrapeButton.classList.remove('opacity-50', 'cursor-not-allowed');
        }

        /**
         * Analyzes a single URL to determine if it's a group or single clinic.
         * @param {string} url - The URL to analyze.
         */
        async function analyzeUrl(url) {
            const resultCard = document.createElement('div');
            resultCard.classList.add('p-4', 'mb-4', 'border', 'rounded-lg', 'shadow-sm', 'bg-white', 'transition-all', 'duration-300');
            
            let domain;
            let fullUrl = url;
            if (!fullUrl.startsWith('http')) {
                fullUrl = 'https://' + fullUrl;
            }

            try {
                domain = new URL(fullUrl).hostname;
            } catch (error) {
                resultCard.innerHTML = `<h3 class="font-bold text-lg text-red-600">Invalid URL: ${url}</h3>`;
                resultsDiv.appendChild(resultCard);
                return;
            }

            // Initial state of the card with a loader
            resultCard.innerHTML = `
                <div class="flex justify-between items-center">
                    <h3 class="font-bold text-lg text-gray-800 break-all">${url}</h3>
                    <div class="loader inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"></div>
                </div>
            `;
            resultsDiv.appendChild(resultCard);

            try {
                // Use a CORS proxy to fetch the website content.
                // NOTE: Public proxies are for development/personal use, not for production.
                const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(fullUrl)}`;
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error(`Failed to fetch with status: ${response.status}`);
                
                const data = await response.json();
                const htmlContent = data.contents;

                if (!htmlContent) throw new Error('Could not retrieve website content.');

                // Simple analysis: check for keywords in the HTML content.
                const textContent = htmlContent.toLowerCase();
                const isGroup = groupKeywords.some(keyword => textContent.includes(keyword));
                
                let groupName = "Unknown Group";
                if (isGroup) {
                    const knownGroup = dentalGroups.find(g => domain.includes(g.name.toLowerCase().replace(/\s+/g, '')));
                    if (knownGroup) {
                        groupName = knownGroup.name;
                    } else {
                        // Extract a plausible name from the domain
                        let name = domain.split('.')[0].replace(/-/g, ' ');
                        name = name.charAt(0).toUpperCase() + name.slice(1);
                        groupName = `${name} Dental Group`;
                    }
                }

                // Update card with the result
                updateResultCard(resultCard, url, domain, isGroup, groupName);

            } catch (error) {
                console.error("Scraping error for " + url, error);
                updateResultCard(resultCard, url, domain, false, null, `Error: Could not analyze website. It may be blocking scrapers.`);
            }
        }

        /**
         * Updates a result card with the analysis outcome.
         */
        function updateResultCard(cardElement, url, domain, isGroup, groupName, errorMessage = null) {
            let status, groupInfo;

            if (errorMessage) {
                status = `<span class="px-3 py-1 text-sm font-semibold text-red-800 bg-red-200 rounded-full">Error</span>`;
                groupInfo = `<div class="mt-2"><p class="text-red-600">${errorMessage}</p></div>`;
            } else if (isGroup) {
                status = `<span class="px-3 py-1 text-sm font-semibold text-green-800 bg-green-200 rounded-full">Group</span>`;
                groupInfo = `<div class="mt-2">
                                <p><strong>Detected Group Name:</strong> ${groupName}</p>
                                <p><strong>Domain:</strong> ${domain}</p>
                           </div>`;
            } else {
                status = `<span class="px-3 py-1 text-sm font-semibold text-blue-800 bg-blue-200 rounded-full">Single Clinic</span>`;
                groupInfo = '';
            }

            cardElement.innerHTML = `
                <div class="flex justify-between items-center flex-wrap gap-2">
                    <h3 class="font-bold text-lg text-gray-800 break-all">${url}</h3>
                    ${status}
                </div>
                ${groupInfo}
            `;
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            populateDentalGroups();
            scrapeButton.addEventListener('click', handleScrape);
        });
    </script>
</body>
</html>
